<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="description" itemprop="description" content="{{description}}" />
    <script type="text/javascript" src="{{h5_host}}/public/H5/js/jquery-2.1.1.min.js"></script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?6b0374434b039f840d791ce1503b0331";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return '';
        }
    </script>
    <title>{{title1}}</title>

    <link rel="stylesheet" href="{{h5_host}}/public/H5/css/video/index.css">
    <link rel="stylesheet" href="{{h5_host}}/public/H5/css/video/new.css">
    <style type="text/css">
        .videoplay{
            width: 100%;
            height: auto;
            background:transparent url('{{h5_host}}/public/H5/images/poster1.png') 50% 50% no-repeat;
            -webkit-background-size:100%;
            -moz-background-size:100%;
            -o-background-size:100%;
            background-size:100%;
        }
        .TextTittle{
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
    </style>

    <script type="text/javascript" src="{{h5_host}}/public/H5/js/template.js"></script>
    <script type="text/javascript" src="{{h5_host}}/public/H5/js/MD5.js"></script>

    <script language="javascript" type="text/javascript" src="{{h5_host}}/public/js/player/jweixin-1.0.0.js"></script>
    <script type="text/javascript">
        wx.config({
            debug:  false,  //调式模式，设置为ture后会直接在网页上弹出调试信息，用于排查问题
            appId: '{{appId}}',
            timestamp: '{{timestamp}}',
            nonceStr: '{{nonceStr}}',
            signature: '{{signature}}',
            jsApiList: [  //需要使用的网页服务接口
                'checkJsApi',  //判断当前客户端版本是否支持指定JS接口
                'onMenuShareTimeline', //分享给好友
                'onMenuShareAppMessage', //分享到朋友圈
                'onMenuShareQQ',  //分享到QQ
                'onMenuShareWeibo' //分享到微博
            ]
        });
        wx.ready(function () {   //ready函数用于调用API，如果你的网页在加载后就需要自定义分享和回调功能，需要在此调用分享函数。//如果是微信游戏结束后，需要点击按钮触发得到分值后分享，这里就不需要调用API了，可以在按钮上绑定事件直接调用。因此，微信游戏由于大多需要用户先触发获取分值，此处请不要填写如下所示的分享API
            var
                    s_title = "{{title}} | 法制与新闻客户端",  // 分享标题
                    s_link = "{{share}}",  // 分享链接
                    s_desc = document.getElementById("s_desc").value,  //分享描述
                    s_imgUrl = document.getElementById("s_imgUrl").value; // 分享图标
            //朋友圈
            wx.onMenuShareTimeline({
                title: s_title, // 分享标题
                link: s_link, // 分享链接
                imgUrl: s_imgUrl, // 分享图标
                success: function () {alert('分享成功') },
                cancel: function () {alert('分享失败') }
            });
            //发送给好友
            wx.onMenuShareAppMessage({
                title: s_title, // 分享标题
                desc: s_desc, // 分享描述
                link: s_link, // 分享链接
                imgUrl: s_imgUrl, // 分享图标
                type: '', // 分享类型,music、video或link，不填默认为link
                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                success: function () {alert('分享成功')},
                cancel: function () {alert('分享失败')}
            });
            //QQ好友
            wx.onMenuShareQQ({
                title: s_title, // 分享标题
                desc: s_desc, // 分享描述
                link: s_link, // 分享链接
                imgUrl: s_imgUrl, // 分享图标
                success: function () {alert('分享成功') },
                cancel: function () {alert('分享失败') }
            });
            //腾讯微博
            wx.onMenuShareWeibo({
                title: s_title, // 分享标题
                desc: s_desc, // 分享描述
                link: s_link, // 分享链接
                imgUrl: s_imgUrl, // 分享图标
                success: function () {alert('分享成功') },
                cancel: function () {alert('分享失败') }
            });
        });
        wx.error(function (res) {
            // alert(res.errMsg);  //打印错误消息。及把 debug:false,设置为debug:ture就可以直接在网页上看到弹出的错误提示
        });
    </script>
    <style>
        .nwecer content{width:92%; margin:0px auto; font-size:14px; color:#333; margin-bottom:12px; line-height:22px;}
        .con img{width:100%;}
        .con .playIcon{position: absolute;top: 50%;left: 50%;height: 40px;width: 40px;margin-left: -20px;margin-top: -20px; }
        .videoplay{
            width: 100%;
            height:100%;
            /*background:transparent url('__PUBLIC__/H5/images/poster1.png') 50% 50% no-repeat;*/
            /*-webkit-background-size:100%;*/
            /*-moz-background-size:100%;*/
            /*-o-background-size:100%;*/
            /*background-size:100%;*/
        }

        /*打赏样式*/
        .reward_con{
            text-align: center;
            margin-top:20px;
            width: 92%;
            padding: 0 4%;
            border-bottom: 1px solid #cccccc;
        }
        .reward_con em{
            background: url("{{h5_host}}/public/H5/images/reward.png") no-repeat center center;
            background-size: 100%;
            display: inline-block;
            height:40px;
            width:40px;
            margin-bottom: 10px;
        }
        .reward_text{
            display: block;
            margin-bottom: 15px;
            font-size: 12px;
            color:#999999;
        }
        .reward_text .reward_num{
            color:#fe1c1c;
        }
        .reward_lists li{
            float: left;
            width:25px;
            height:25px;
            margin-right:4px;
            margin-bottom:15px;
        }
        .reward_lists li img {
            width:25px;
            height:25px;
            -webkit-border-radius: 100%;
            -moz-border-radius: 100%;
            -ms-border-radius: 100%;
            -o-border-radius: 100%;
            border-radius: 100%;
        }
        .mask{
            background: rgba(0,0,0,0.5);
            text-align: center;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            display: none;
        }
        .reward_box{
            width:100%;
            border-top: 1px solid #cccccc;
            position: fixed;
            display: none;
            z-index: 3;
            bottom: -300px;
            background:#f7f7f7;
        }
        .reward_box h3{
            width:100%;
            height:50px;
            line-height: 50px;
            text-align: center;
            font-size: 18px;
            font-weight:bold;
            border-bottom:1px solid #cccccc;
        }
        .reward_box .reward_close i{
            position:absolute;
            top:10px;
            right:10px;
            width:15px;
            height: 15px;
            display: inline-block;
            background:url("{{h5_host}}/public/H5/images/delete.png");
            background-size: 100%;
        }
        .re_price_list{
            border-bottom: 1px solid #cccccc;
            text-align: center;
        }
        .re_price{
            margin:22px 4% 9px 4%;
            width:92%;

        }
        .re_price li{
            height:40px;
            box-sizing:border-box;
            line-height: 40px;
            text-align: center;
            width:30%;
            border-radius: 5px;
            float: left;
            border:1px solid #cccccc;
            color:#555555;
            font-size: 14px;
            margin-bottom: 15px;
        }
        .re_price li:nth-child(2){
            margin: 0% 5%;
        }
        .re_price li:nth-child(5){
            margin: 0% 5%;
        }
        .re_price li span{font-size:14px }
        .re_btn{
            height:40px;
            width:150px;
            background:#2ea7e0;
            color:#fff;
            text-align: center;
            line-height: 40px;
            font-size:16px;
            outline: none;
            border: none;
            border-radius:5px;
            margin-bottom: 22px;
        }
        .charge_con{
            width:100%;
            height: 45px;
            font-size: 14px;
        }
        .charge_con>span{
            margin-top: 10px;
            display: inline-block;
            margin-left: 20px;
        }
        .charge_con .huiwenbi{
            font-size: 14px;
            display: inline-block;
            color:#2ea7e0;
        }
        .re_charge{
            width:50px;
            height:25px;
            line-height: 25px;
            color:#fff;
            background:#2ea7e0;
            outline:none;
            border: none;
            border-radius:5px;
            float: right;
            margin-right:20px;
            margin-top: 10px
        }
        .re_active{
            background:#2ea7e0;
            color:#fff;
        }
        .amount_input{
            width: 92%;
            height: 35px;
            font-size: 14px;
            border: 1px solid #cccccc;
            border-radius: 5px;
            margin: 22px 4% 9px 4%;
            background: #f7f7f7;
        }
        .amount_input input {
            width: 85%;
            height: 100%;
            border: none;
            outline: none;
            background: #f7f7f7;
        }
        .tips{
            background: rgba(0,0,0,0.5);
            text-align: center;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            display: none;
        }
        .tips .tips_box{
            position: relative;
            left: 20%;
            top: 42%;
            width: 60%;
            height: 16%;
            z-index: 4;
            font-size: 14px;
            display: block;
            background: #fff;
            border-radius:10px;            
        }
        .tips .tips_box .tips_text{
            padding: 15px 10px 10px 10px;
            display: block;
        }
        .tips .tips_box .sure{
            width: 100%;
            display: block;
            color: #2ea7e0;
            position:absolute;
            bottom: 10px;
        }
        .ovfHiden{overflow: hidden;height: 100%;}

        /*评论区域*/
        html,div,p,h1,h2,h3,h4,i,ul,li{
            margin: 0;
            padding: 0;
        }
        ul,li{
            list-style: none;
        }
        .comment{
            width: 100%;
        }
        .comment-top{
            width: 100%;
            height:48px;
            line-height:48px;
            border-bottom: 0.5px solid #e6e6e6;
            box-sizing: border-box;
            position: relative;
        }
        .comment-top .comd{
            position: absolute;
            top:14px;
            left:0;
            width:4px;
            height:20px;
            background-color: #2ea7e0;
        }
        .comment-top  span{
            font-size: 16px;
            display: inline-block;
            color: #000;
            padding-left:8px;
        }
        .comment .comment-conent{
            width: 100%;
            box-sizing: border-box;
            padding-left:4px;
        }
        .comment .comment-conent li{
            width: 100%;
            padding: 10px 6px 10px 50px ;
            border-bottom: 1px solid  #e6e6e6;
            position: relative;
            box-sizing: border-box;
        }
        .comment .comment-conent li:last-child{
            border-bottom: none;
        }
        .comment .comment-conent li .user_img{
            position: absolute;
            top:11px;
            left:4px;
            width: 38px;
            height: 38px;
            border-radius:100%;
            background-color: #ebebe3;
        }
        .comment .comment-conent li .user_img img{
            width:100%;
            height:100%;
            border-radius:100%;
        }
        .comment .comment-conent li .title,.content{
            font-size: 15px;
            margin-bottom:9px;
            word-wrap:break-word
        }
        .comment .comment-conent li span{
            font-size: 9px;
        }
        .comment .comment-conent li .title,span{
            color:#999999 ;
        }
        .comment .btn_more{
            display: none;
            width: 288px;
            height: 30px;
            line-height: 30px;
            font-size: 15px;
            color:#2ea7e0;
            border: 0.5px solid #54b7e6;
            border-radius: 15px;
            text-align: center;
            margin: 5px auto;
        }
        div.comment .comment-conent li p.content{
            font-size: 14px;
        }

        /*评论区域*/
    </style>
</head>
<body>
<div style="display:none;">
    <img src="{{cove_img}}"/>
</div>
<input type="hidden" value="{{new_cover_image}}" id="s_imgUrl">
<input type="hidden" value="{{abstract}}" id="s_desc">
<input type="hidden" value="" id="collect_id" />

<div class="nwecer" style="position:relative;height:auto;">
    <div class="top">
        <div class="biaoti">{{title}}</div>
        <div class="tiem">{{data}}&nbsp;&nbsp;&nbsp;&nbsp;
            {{source}}
        </div>
    </div>
    <div class="con">
        {{content}}
    </div>
        <style>
            .nwecer {
                top: 0;
            }
            .oper-btn {
                display: none;
                float: left;
                width: 20px;
                height: 20px;
                margin-right: 10px;
            }
            .collect-btn {
                background: url({{h5_host}}/public/H5/images/collect.png) center center no-repeat;
                background-size: 20px auto;
            }
            .up-btn {
                padding-left: 25px;
                background: url({{h5_host}}/public/H5/images/up.png) left center no-repeat;
                background-size: 20px auto;
                color: #333333;
            }
            .collect-btn.active {
                background-image: url({{h5_host}}/public/H5/images/collect-current.png);
            }
            .up-btn.active {
                background-image: url({{h5_host}}/public/H5/images/up-current.png);
            }
            .top-closed-btn {
                float: left;
                width: 12px;
                height: 12px;
                margin-top: 14px;
                margin-left: 3px;
                padding: 3px;
            }
            .line-1, .line-2 {
                display: inline-block;
                width: 12px;
                height: 2px;
                background-color: #ffffff;
            }
            .line-1 {
                margin-top: 4px;
                transform: rotate(45deg) translateX(-0.5px) translateY(1.5px);
            }
            .line-2 {
                transform: rotate(-45deg)translateY(-2px);
            }
            .download4 .l_side {
                margin-left: 0;
            }
        </style>
    {{out_url}}
    <div class="reward_con">
        <em class="reward_icon"></em>
        <span class="reward_text">已打赏<span class="reward_num" ></span>次</span>
        <ul class="reward_lists"></ul>
    </div>

    <!--评论区域-->
    <div class="comment" data-page="1">
        <!-- 标题-->
        <div class="comment-top">
            <i class="comd"></i>
            <span>评论</span>
        </div>
        <!--标题-->
        <ul class="comment-conent">

        </ul>
        <!-- 加载更多-->
        <a class="btn_more">加载更多</a>
        <!-- 加载更多-->
    </div>
    <!--评论区域-->
    <div class="mask"></div>
    <div class="tips">
        <span class="tips_box">
            <span class="tips_text"></span>
            <span class="sure">确认</span>
        </span>
    </div>
    <div class="reward_box">
        <h3>打赏</h3>
        <span class="reward_close"><i></i></span>
        <div class="re_price_list">
            <div class="amount_input">
                <input type="number" placeholder="请输入汇闻币数量" ><span>汇闻币</span>
            </div>
            <ul class="re_price">
                <li><span>1</span>汇闻币</li>
                <li><span>2</span>汇闻币</li>
                <li><span>5</span>汇闻币</li>
                <li><span>10</span>汇闻币</li>
                <li><span>50</span>汇闻币</li>
                <li><span>100</span>汇闻币</li>
            </ul>
            <button class="re_btn">确定</button>
        </div>
        <div class="charge_con">
            <span>当前余额：<span class="huiwenbi"></span>汇闻币</span>
            <button class="re_charge" onclick="recharge();">充值</button>
        </div>
    </div>
</div>
</div>
<div id="show_links"></div>
<div class="tanchubox" id="tanchubox"></div>
<script type="text/template" id="type">
    <div class="newlist1" style="position:relative; margin-top:{{css_margin_top}}">
        <div class="name_wrap">
            <div class="newlistname1">{{list_title}}</div>
        </div>

        <div class="container1">
            <div class="sectionBox" >
                {{each data as value}}
                    {{if value.type == 4}}
                        {{if type}}
                            <a href="{{h5_host}}/home/video/video?news_id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                <div class="TextListImg">
                                    <div class="oImg oTimeBox">
                                        <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                        <div class="oTime">
                                            <div class="zheZhao">
                                                    <span>
                                                        <a href="{{h5_host}}/home/video/video?news_id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1" style="color:#fff">
                                                            <img src="{{h5_host}}/public/H5/images/bofang_hdpi.png" style="margin-right:5px;padding-left:5px;width:15%;height:15%">
                                                            {{value.duration}}
                                                        </a>
                                                    </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="oText">
                                        <p class="TextTittle">
                                            <a href="{{h5_host}}/home/video/video?news_id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">{{value.title}}</a>
                                        </p>
                                        <p class="TextCon TextCon1" style="margin-top:13px;">
                                            <span>{{value.source_name}}</span>
                                            <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                                <!--<span style="float:right; padding-right:10px">-->
                                                    <!--<img src="{{h5_host}}/public/H5/images/bofangcishu@2x.png" style="width:10px;height:10px;padding-right:5px;vertical-align:middle;">-->
                                                    <!--{{value.play_count ? value.play_count : 0}}-->
                                                <!--</span>-->
                                        </p>
                                    </div>
                                </div>
                            </a>
                        {{else}}
                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                <div class="TextListImg">
                                    <div class="oImg oTimeBox">
                                        <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                        <div class="oTime">
                                            <div class="zheZhao">
                                                    <span>
                                                        <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}" style="color:#fff">
                                                            <img src="{{h5_host}}/public/H5/images/bofang_hdpi.png" style="margin-right:5px;padding-left:5px;width:15%;height:15%">
                                                            {{value.duration}}
                                                        </a>
                                                    </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="oText">
                                        <p class="TextTittle">
                                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">{{value.title}}</a>
                                        </p>
                                        <p class="TextCon TextCon1" style="margin-top:13px;">
                                            <span>{{value.source_name}}</span>
                                            <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                                <!--<span style="float:right; padding-right:10px">-->
                                                    <!--<img src="{{h5_host}}/public/H5/images/bofangcishu@2x.png" style="width:10px;height:10px;padding-right:5px;vertical-align:middle;">-->
                                                    <!--{{play_count}}-->
                                                <!--</span>-->
                                        </p>
                                    </div>
                                </div>
                            </a>
                        {{/if}}
                    {{else if value.type == 1 || value.type == 7}}
                        {{if type}}
                            {{if external_link}}
                                <a href="{{external_link}}">
                            {{else}}
                                <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                            {{/if}}
                                <div class="TextListImg">
                                    <div class="oImg">
                                        {{if external_link}}
                                            <a href="{{external_link}}">
                                        {{else}}
                                            <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                        {{/if}}
                                            <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                        </a>
                                    </div>
                                    <div class="oText">
                                        <p class="TextTittle">
                                            {{if external_link}}
                                                <a href="{{external_link}}">{{value.title}} {{external_link}}</a>
                                            {{else}}
                                                <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">{{value.title}} {{external_link}}</a>
                                            {{/if}}
                                        </p>
                                        <p class="TextCon TextCon1" style="margin-top:13px;">
                                            <span >{{value.source_name}}</span>
                                            <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                            <span style="float:right;padding-right:10px"></span>
                                        </p>
                                    </div>
                                </div>
                            </a>
                        {{else}}
                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                <div class="TextListImg">
                                    <div class="oImg">
                                        <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                            <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                        </a>
                                    </div>
                                    <div class="oText">
                                        <p class="TextTittle">
                                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">{{value.title}}</a>
                                        </p>
                                        <p class="TextCon TextCon1" style="margin-top:13px;">
                                            <span>{{value.source_name}}</span>
                                            <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                            <span style="float:right; padding-right:10px"></span>
                                        </p>
                                    </div>
                                </div>
                            </a>
                        {{/if}}
                    {{else if value.type == 6}}
                        {{if type}}
                            {{if external_link}}
                                <a href="{{external_link}}">
                            {{else}}
                                <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                            {{/if}}
                                <div class="TextList">
                                    <p class="TextTittle">
                                        {{if external_link}}
                                            <a href="{{external_link}}">{{value.title}}</a>
                                        {{else}}
                                            <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">{{value.title}}</a>
                                        {{/if}}
                                    </p>
                                    <p class="TextCon" style="width:100%">
                                        <span>{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                    </p>
                                </div>
                            </a>
                        {{else}}
                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                <div class="TextList">
                                    <p class="TextTittle" >
                                        <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">{{value.title}}</a>
                                    </p>
                                    <p class="TextCon" style="width:100%">
                                        <span>{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                    </p>
                                </div>
                            </a>
                        {{/if}}
                    {{else if value.type == 5}}
                        {{if type}}
                            <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                <div class="ImgArry">
                                    <p class=" ImgTitle">
                                        <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1" >{{value.title}}</a>
                                    </p>
                                    <div class="oPic">
                                        {{each value.content as content_data content_index}}
                                            {{if content_index < 3}}
                                                <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                                    <img class="DivImg {{if content_index == 1}}Middle{{else if content_index == 2}}last{{/if}}" src="{{content_data.img}}" name="{{content_index}}" style="width:131px; height:88px;">
                                                </a>
                                            {{/if}}
                                        {{/each}}
                                    </div>
                                    <p class="TextCon" style="width:100%">
                                        <span style="">{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                    </p>
                                </div>
                            </a>
                        {{else}}
                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                <div class="ImgArry">
                                    <p class=" ImgTitle">
                                        <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">{{value.title}}</a>
                                    </p>
                                    <div class="oPic">
                                        {{each value.content as content_data content_index}}
                                            {{if content_index < 3}}
                                                <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                                <img class="DivImg {{if content_index == 1}}Middle{{else if content_index == 2}}last{{/if}}" src="{{content_data.img}}" name="{{content_index}}" style="width:131px; height:88px;">
                                                </a>
                                            {{/if}}
                                        {{/each}}
                                    </div>
                                    <p class="TextCon" style="width:100%">
                                        <span style="">{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                    </p>
                                </div>
                            </a>
                        {{/if}}
                    {{else}}
                        {{if type}}
                            <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                <div class="ImgArry1">
                                    <p class="ImgTitle">
                                        <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">{{value.title}}</a>
                                    </p>
                                    <div class="oPic">
                                        <div class="DivImg1">
                                            <a href="{{h5_host}}/home/index/newsDetail?id={{value.news_id}}&type=thirdParty&from=singlemessage&isappinstalled=1">
                                                <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                            </a>
                                        </div>
                                    </div>
                                    <p class="TextCon" style="width:100%">
                                        <span>{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                        <span style="float:right;padding-right:10px"></span>
                                    </p>
                                </div>
                            </a>
                        {{else}}
                            <a href="#">
                                <div class="ImgArry1">
                                    <p class=" ImgTitle">
                                        <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">{{value.title}}</a>
                                    </p>
                                    <div class="oPic">
                                        <div class="DivImg1">
                                            <a href="#" class="click_link" data-news_id="{{value.news_id}}" data-type="{{value.type}}" data-category="{{value.category}}" data-title="{{value.title}}" data-source_id="{{value.source_id}}" data-reference_type="{{value.reference_type}}" data-source_name="{{value.source_name}}" data-cover_image="{{value.cover_image}}">
                                                <img src="{{value.cover_image}}" style="width:100%;height:100%">
                                            </a>
                                        </div>
                                    </div>
                                    <p class="TextCon" style="width:100%">
                                        <span>{{value.source_name}}</span>
                                        <span class="DuJia" style="float:right">{{value.subtitle}}</span>
                                        <span style="float:right;padding-right:10px"></span>
                                    </p>
                                </div>
                            </a>
                        {{/if}}
                    {{/if}}
                {{/each}}
            </div>
        </div>
    </div>
    {{if list_type == "link"}}
    <div style="width:100%;height:15px;background:#d5d5d5"></div>
    {{/if}}
</script>
<script type="text/template" id="openapp">
    <div class="download4">
        <div class="top-closed-btn">
            <span class="line-1"></span>
            <span class="line-2"></span>
        </div>
        <div class="l_side"></div>
        <div class="r_side"><a href="{{host}}/kdemejkzewrmhh/gfdgxereppxkyd/">下载手机客户端</a></div>
    </div>
</script>
<script type="text/template" id="comment_box">
    {{each ReturnData as value}}
    <li>
        <i class="user_img">
            {{if value.avatar}}
            <img src="{{value.avatar}}" alt=""/>
            {{else}}
            <img src="{{h5_host}}/public/H5/images/headicon.png" alt=""/>
            {{/if}}
        </i>
        <p class="title">
            {{if value.nickname }}
               {{value.nickname}}
            
            {{/if}}
        </p>
        <p class="content">
            {{if value.content }}
               {{value.content}}
            
            {{/if}}
        </p>
        {{if value.real_time}}
        <span>
            {{value.real_time}}            
        </span>
        {{/if}}
    </li>
    {{/each}}
</script>
<script>
    function init () {
        var type = getQueryString("type");
        if (type == "m" || type == "thirdParty") {
            var tp = template("openapp", {
                host: "{{host}}"
            });
            $(".nwecer").css("top", "42px").after(tp);
        }
        if (type == "m") {
            $(".oper-btn").show();
        }
        if (type == "thirdParty" || type == "qq") {
            $(".reward_con").hide();
            $(".mask").hide();
            $(".reward_box").hide();
        }
        if (getQueryString("user_id")) {
            get_newsinfo();
        }
        reward_list();
    }
    function oper (param, self, callback) {
        var appKey = "html";
        var unique = "xinhuiwen,fighting!";
        var timestamp = Date.parse(new Date()) / 1000;
        var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
        var signature = $.md5(md5Val);
        var data = {
            timestamp: timestamp,
            app_key: appKey,
            unique: unique,
            sign: signature
        };
        var params = $.extend(param.data, data);
        $.ajax({
            url: "<?php echo Yii::$app->params['host_api'];?>" + param.url,
            type: "POST",
            data: params,
            dataType: "json",
            headers: {
                "Authorization": "Bearer " + getQueryString("token"),
                "Content-Type": "application/x-www-form-urlencoded; charset=utf-8",
            },
            success: function (response) {
                if (response.Success) {
                    if (callback && typeof(callback) == "function") {
                        callback(response, self);
                    }
                } else {
                    alert(response.Message);
                }
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
    function get_newsinfo () {
        var param = {
            url: "/information/new-info",
            data: {
                id: getQueryString("id"),
                user_id: getQueryString("user_id"),
                user_content: 0
            }
        }
        var callback = function (response) {
            if (response.ReturnData.user_is_praise == 1) {
                $(".up-btn").addClass("active");
            }
            $(".up-btn").text(response.ReturnData.praise_count);
            if (response.ReturnData.collect_id && response.ReturnData.collect_id != "") {
                $(".collect-btn").addClass("active");
                $("#collect_id").val(response.ReturnData.collect_id);
            }
        }
        oper(param, "", callback);
    }
    //评论列表
    $(function(){
        init();
        hideMore();
        commentList(1)
        function commentList(page){
            var param = {
                url:"/public-newscomment/comment-list",
                data: {
                    news_id: getQueryString("id"),
                    page:page,
                    pageSize:3
                }
            };
            var callback = function (response) {
                if(response.Success){
                    var length = response.ReturnData.length;
                    if(page == 1 && length == 0){
                        $(".comment").hide();
                    }else{
                        if(length == 0){
                            $(".btn_more").hide();
                        }else{
                            var html=template("comment_box",response);
                            $(".comment-conent").append(html);
                        }
                    }
                }
                else{
                  alert(response.Message)
                }
            };
            oper(param,"", callback);
        }
        // 加载更多
        $(".btn_more").click(function(){
            //评论列表 加载更多
            var page = $(".comment").data("page");
            page++;
            $(".comment").data("page",page);
            commentList(page);
        })
        function hideMore(){
            var u = navigator.userAgent, app = navigator.appVersion;
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
            var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
            var is_client = getQueryString('type');
            if((isAndroid && !is_client) ||(isiOS && !is_client)){
                $(".btn_more").css({
                    display:"block"
                });
            }
        }

    })



    $(function () {
        init();
        $("body").on("click", ".top-closed-btn", function () {
            $(this).closest(".download4").remove();
            $(".nwecer").css("top", "0");
        });
        $(".collect-btn").click(function () {
            if (getQueryString("token")) {
                var active = $(this).hasClass("active") ? true : false;
                var param = {
                    url: active ? "/newsusercollect/collect-del" : "/newsusercollect/collect-add",
                    data:  active ? {
                        user_id: getQueryString("user_id"),
                        collect_id: $("#collect_id").val()
                    } : {
                        user_id: getQueryString("user_id"),
                        type: 1,
                        news_id: getQueryString("id")
                    }
                };
                if (active && !$("#collect_id").val()) {
                    alert("请重试");
                    return false;
                }
                var callback = function (response, self) {
                    var active = self.hasClass("active") ? true : false;
                    if (active) {
                        self.removeClass("active");
                    } else {
                        self.addClass("active");
                    }
                    if (param.url == "/newsusercollect/collect-add") {
                        $("#collect_id").val(response.ReturnData);
                    } else if (param.url == "/newsusercollect/collect-del") {
                        $("#collect_id").val("");
                    }
                }
                oper(param, $(this), callback);
            } else {
                var id = getQueryString('id');
                window.location.href = "<?php echo Yii::$app->params['m3_host'];?>auth/login?type=static&id="+id;
            }
        });
        $(".up-btn").click(function () {
            if (getQueryString("token")) {
                var appKey = "html";
                var unique = "xinhuiwen,fighting!";
                var timestamp = Date.parse(new Date()) / 1000;
                var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
                var signature = $.md5(md5Val);
                var active = $(this).hasClass("active") ? true : false;
                var param = {
                    url: "/news-extend/praise",
                    data: {
                        timestamp:timestamp,
                        app_key: appKey,
                        unique:unique,
                        sign:signature,
                        token: getQueryString("token"),
                        praised_status: active ? 0 : 1,
                        news_type: 1,
                        news_id: getQueryString("id")
                    }
                };
                var callback = function (response, self, param) {
                    var active = self.hasClass("active") ? true : false;
                    var up_num = self.text();
                    if (active) {
                        self.removeClass("active");
                        up_num--;
                    } else {
                        self.addClass("active");
                        up_num++;
                    }
                    self.text(up_num);
                }
                oper(param, $(this), callback);
            } else {
                var id = getQueryString('id');
                window.location.href = "<?php echo Yii::$app->params['m3_host'];?>auth/login?type=static&id="+id;
            }
        });
    });

    function clickImage(){
        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        if (isAndroid) {
            window.newsControl.tapImage();
            FireKong.onClick();

        } else if(isiOS) {
            tapImage();
            FireKong.onClick();
        }
    }
    function toNewsDetail(newsId, newsType,category,title,sourceName,sourceId,quiz,img) {
        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        var is_client = getQueryString('type');
        if (isAndroid && !is_client){
            window.newsControl.toNews(newsId, newsType,category,title,sourceName,sourceId,quiz,img);
        } else if(isiOS && !is_client) {
            toNews(newsId, newsType,category,title,sourceName,sourceId,quiz,img);
        } else {
            var url = "<?php echo Yii::$app->params['host_api'];?>/home/index/newsDetail?id=" + newsId;
            window.location.href = url;
        }
    }
    /*视频点击*/
    var video=document.getElementsByClassName("videoplay");
    for(var i=0;i<video.length;i++){
        video[i].onclick=function(){
            if(this.paused){
                this.play();
            }else{
                this.pause();
            }
        }
    }

    // 点击打赏图标
    $(".reward_icon").click(function(){
        var token   = getQueryString('token');

        if(!token){
            var u = navigator.userAgent, app = navigator.appVersion;
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
            var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
            var is_client = getQueryString('type');
            if (isAndroid && !is_client){
                window.newsControl.toLogin();
            } else if(isiOS && !is_client) {
                toLogin();
            } else {
                var id = getQueryString('id');
                window.location.href = "<?php echo Yii::$app->params['m3_host'];?>auth/login?type=static&id="+id;
            }
        }else{
            var u = navigator.userAgent, app = navigator.appVersion;
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端或者uc浏览器
            var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
            var is_client = getQueryString('type');
            if (isAndroid){
                window.newsControl.toGift(1);
            } else if(isiOS){
                toReward();
            } else {
                get_user_amount();
                $('html,body').addClass('ovfHiden');
                $(".reward_box").show();
                $(".reward_box").animate({"bottom":"0"},"slow");
                $(".mask").show();
            }
        }
    });

    function recharge(){
        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        var is_client = getQueryString('type');

        if (isAndroid && !is_client){
            window.newsControl.toRewardRecharge();
        } else if(isiOS && !is_client) {
            toRewardRecharge();
        }
    }

    // input监听
    $(".amount_input input").bind('input propertychange',function () {

        var value = $(".amount_input input").val();
        $(".re_price li").each(function(){
            $(this).removeClass("re_active");
            if($("span",this).text() == value ){
                $(this).addClass("re_active") 
            }

        })
    })

    // 关闭tips
    $(".sure").click(function(){
        $(".tips").hide();
    })

    // 选择打赏汇闻币
    $(".re_price li").click(function(){
        var _this =this;
        $(this).addClass("re_active").siblings().removeClass("re_active");
        var value = $("span",_this).text();
        $(".amount_input input").val(value);
    });

    // 打赏
   $(".re_btn").click(function(){
            var value = $(".amount_input input").val();
            var reg = /^[1-9]\d*$/;
            var num = $(".huiwenbi").text() - value;

            // 汇闻币不足弹窗
            if(num < 0){
                var u = navigator.userAgent, app = navigator.appVersion;
                var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
                var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
                var is_client = getQueryString('type');

                if (isAndroid && !is_client){
                    window.newsControl.lackBalance();
                } else if(isiOS && !is_client) {
                    lackBalance();
                }
            }else if( (!reg.test(value) || value>1000) && num > 0 ){ 
                var html = "打赏数量为1~1000的整数";
                $(".tips").show();
                $(".tips_text").text(html);
            }else{
                var news_id = getQueryString('id');
                var token   = getQueryString('token');
                var appKey = "html";
                var unique = "xinhuiwen,fighting!";
                var timestamp = Date.parse(new Date()) / 1000;
                var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
                var signature = $.md5(md5Val);
                var data = {
                    token:token,
                    timestamp:timestamp,
                    app_key: appKey,
                    unique:unique,
                    sign:signature,
                    money:value,
                    is_show:'1',
                    news_id:news_id
                };
                $.ajax({
                     url:"<?php echo Yii::$app->params['host_api'];?>/news-extend/reward",
                     data:data,
                     type:"POST",
                     dataType:"Json",
                     headers: {
                         "Authorization": "Bearer " + token,
                         "Content-Type": "application/x-www-form-urlencoded; charset=utf-8",
                     },
                     contentType: "application/x-www-form-urlencoded",
                     success:function(response){
                         if(response.ResultCode == '0000'){
                            var html = response.Message;
                            $(".tips").show();
                            $(".tips_text").text(html);
                            //清空 
                            $(".re_price li").each(function(){
                                $(this).removeClass("re_active")
                            })
                            $(".amount_input input").val("")
                             
                            $(".sure").click(function(){
                                $(".tips").hide();
                                location.reload();
                            })
                         }
                         if (response.Message == "用户未登陆") {
                             var id = getQueryString('id');
                             window.location.href = "<?php echo Yii::$app->params['m3_host'];?>auth/login?type=static&id="+id;
                         }
                     }
                })
            }
        })

    // 关闭打赏窗口
    $(".reward_close").click(function(){
        change_style();
    })
    $(".mask").click(function(){
        change_style();
    })

    function change_style(){
        $(".mask").hide();
        $(".re_price li").removeClass("re_active");
        $('html,body').removeClass('ovfHiden');
        $(".amount_input input").val("");
        $(".reward_box").css({
            "display":"block",
            "bottom":"-360px"
        })
    }


    /**
     * 查看用户点赞状态
     */
    function user_is_reward(){
        var id = getQueryString('id');
        var token = getQueryString('token');
        var user_id = getQueryString('user_id');
        var appKey = "html";
        var unique = "xinhuiwen,fighting!";
        var timestamp = Date.parse(new Date()) / 1000;
        var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
        var signature = $.md5(md5Val);
        var data = {
            news_id:id,
            token:token,
            user_id:user_id,
            is_show:'1',
            timestamp:timestamp,
            app_key: appKey,
            unique:unique,
            sign:signature
        };
        $.ajax({
            type: "GET",
            url: "<?php echo Yii::$app->params['host_api'];?>/news-extend/reward",
            data: data,
            dataType: "json",
            beforeSend: function (XMLHttpRequest) {
                 XMLHttpRequest.setRequestHeader('Authorization:', 'Bearer '+token);
            },
            success: function (data) {
                alert(data);
            }
        });
    }

    function reward_list(){
        var id = getQueryString('id');
        var appKey = "html";
        var unique = "xinhuiwen,fighting!";
        var timestamp = Date.parse(new Date()) / 1000;
        var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
        var signature = $.md5(md5Val);
        var data = {
            news_id:id,
            is_show:'1',
            timestamp:timestamp,
            app_key: appKey,
            unique:unique,
            sign:signature
        };
        $.ajax({
            type: "GET",
            url: "<?php echo Yii::$app->params['host_api'];?>/news-extend/get-reward-users-by-news-id",
            data: data,
            dataType: "json",
            success: function (data) {
                if (data.Success) {
                    var html = '';
                    var list = data.ReturnData ? data.ReturnData.list : [];
                    if(list.length > 0){
                        for(var i=0;i<list.length;i++){
                            if(list[i]['avatar'] != null){
                                html += '<li><img src="'+list[i]['avatar']+'" alt=""></li>';
                            }
                        }
                    }
                    $(".reward_num").html(data.ReturnData.total_count);
                    $(".reward_lists").html(html);
                } else {
                    alert(data.Message)
                }
            }
        });
    }

    function get_user_amount(){
        var token = getQueryString('token');
        var appKey = "html";
        var unique = "xinhuiwen,fighting!";
        var timestamp = Date.parse(new Date()) / 1000;
        var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
        var signature = $.md5(md5Val);
        var data = {
            token:token,
            is_show:'1',
            timestamp:timestamp,
            app_key: appKey,
            unique:unique,
            sign:signature
        };
        console.log(data);
        $.ajax({
            type: "POST",
            url: "<?php echo Yii::$app->params['host_api'];?>/user/get-my-gold",
            data: data,
            dataType: "json",
            headers: {
                "Authorization": "Bearer " + token,
                "Content-Type": "application/x-www-form-urlencoded; charset=utf-8"
            },
            success: function (data) {
                console.log(data)
                if(data.ResultCode == '0000'){
                    var html = data.ReturnData.amount;
                    $(".huiwenbi").html(html);
                }else{
                    var u = navigator.userAgent, app = navigator.appVersion;
                    var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
                    var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
                    var is_client = getQueryString('type');

                    if (isAndroid && !is_client){
                        window.newsControl.toLogin();
                    } else if(isiOS && !is_client) {
                        toLogin();
                    }
                }
            },
            complete: function (err, data) {
                console.log(err)
                console.log(data);
            }
        });
    }
</script>
<script type="text/javascript">
    function openApps(type,news_id) {
        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        var t = Date.now();

        if(isiOS) {
            var loadDateTime = new Date();
            window.setTimeout(function() {
                        var timeOutDateTime = new Date();
                        if (timeOutDateTime - loadDateTime < 5000) {
                            window.location = "https://fzapi.xinhuiwen.com/skip/"+type+"/"+news_id;
                        } else {
                            window.history.back();
                        }
                    },
                    25);
            window.location = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hkzr.vrnew";
        }else if(isAndroid){
            $('body').append("<iframe id='ifr' src='xinhuiwen://newsDetail?id=14757450227&type=image' style='display:none'></iframe>");
            setTimeout(function(){
                if(!t || Date.now()-t < 600){
                    window.location.href = "http://app.xinhuiwen.com/kdemejkzewrmhh/gfdgxereppxkyd/";//android端 下载跳转地址 .apk
                }
            },500);
        }
    }


    function show(Id){
        document.getElementById("tanchubox").style.display="block";
        document.getElementById(Id).style.display="block";
    }
    function hide(Id){
        document.getElementById("tanchubox").style.display="none";
        document.getElementById(Id).style.display="none";
    }
    function toSourceId(source_id,source_name){
        var u = navigator.userAgent, app = navigator.appVersion;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        if (isAndroid) {
            window.newsControl.toSource(source_id,source_name);
        } else if(isiOS) {
            toSource(source_id,source_name);
        } else {
            var url = "{{h5_host}}/Api/Newssource/sourceDetail?source_id=" + source_id;
            window.location.href = url;
        }
    }
    $(function () {
        //图片视频连接
        var devHeight = parseInt($(window).width() / (1.8)) + 'px';
        $(".con video").css({
            "width":"100%"
        })
        $(".con video").parent().css({
//            "height": devHeight,
            "display": "block",
        })
        $(".con video").parent().find("img").css({
            "height": "100%",
        })
        var playIcon = "<img src='{{h5_host}}/public/images/shipin_bofang.png' class='playIcon'>";
        $(".videoplay").parent().css({
            "position": "relative",
//            "height": devHeight
        })
        // 添加播放按钮
        $(".videoplay").parent().append(playIcon);
        // 隐藏video
        $(".videoplay").hide();
        //点击图片播放视频
        var videoParent = $(".videoplay").parent();
        // console.log(videoParent.length)
        for (var i = 0; i < videoParent.length; i++) {
            videoParent[i].index = i;
            videoParent[i].onclick = function () {
                // alert(123)
                $(this).find("img").hide();
                $(this).find(".videoplay").show();
                playVideo(this.index);
            }
        }
        function playVideo(str) {
            var video = $(".videoplay");
            if (video.length > 0) {
                for (var i = 0; i < video.length; i++) {
                    video[i].index = i;
                    if (str == i) {
                        video[i].play();
                    } else {
                        video[i].pause();
                    }
                }
            }
        }

        //    document.getElementById('openApp').onclick = function(e){
        //        // 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP，并自动阻止a标签的默认行为
        //        // 否则打开a标签的href链接
        //        var ifr = document.createElement('iframe');
        //        ifr.src = 'xinhuiwen://';
        //        ifr.style.display = 'none';
        //        document.body.appendChild(ifr);
        //        window.setTimeout(function(){
        //            document.body.removeChild(ifr);
        //        },3000)
        //    };
    });
    $(function () {
        var id = getQueryString('id');
        var news_type = getQueryString('news_type');
        var token = getQueryString('token');
        var type = getQueryString('type');
        var appKey = "html";
        var unique = "xinhuiwen,fighting!";
        var timestamp = Date.parse(new Date()) / 1000;
        var md5Val = "app_key=" + appKey + "&timestamp=" + timestamp + "&unique=" + unique;
        var signature = $.md5(md5Val);
        var data = {
            news_id:id,
            token:token,
            is_show:'1',
            timestamp:timestamp,
            app_key: appKey,
            unique:unique,
            sign:signature
        };
        $.ajax({
            type: "GET",
            url: "<?php echo Yii::$app->params['host_api'];?>/newslink/getnewslink",
            data: data,
            dataType: "jsonp",
            jsonp: 'callback',
            jsonpCallback: "success_link",
            success: function (data) {
                var html = '';
                var result = data.ReturnData;
                var link = result['link_news'];
                var recommend = result['Recommend_news'];
                var link_html = "",
                    recommend_html = "";
//                console.log(result)
                if (link.length > 0) {
                    link_html = template("type", {
                        list_type: "link",
                        list_title: "关联新闻",
                        h5_host: "{{h5_host}}",
                        external_link: "{{external_link}}",
                        data: link,
                        type: type,
                        css_margin_top: "50px"
                    });

                }
                if (recommend.length > 0) {
                    recommend_html = template("type", {
                        list_type: "recommend",
                        list_title: "推荐阅读",
                        h5_host: "{{h5_host}}",
                        external_link: "{{external_link}}",
                        data: recommend,
                        type: type,
                        css_margin_top: link.length == 0 ? "50px" : "0px"
                    });
                }
                html = link_html + recommend_html;
                $(".nwecer").after(html);
                getStyle();
            },
            error: function (error) {
                console.log(error)
            }
        })
        $("body").on("click", ".click_link", function(e) {
            e.preventDefault();
            var newsType = $(this).data("type");
            var sourceId = $(this).data("source_id");
            var newsId = $(this).data("news_id");
            var title = $(this).data("title");
            var sourceName = $(this).data("source_name");
            var img = $(this).data("cover_image");
            var quiz = $(this).data("reference_type");
            var category = $(this).data("category");
            toNewsDetail(newsId, newsType,category,title,sourceName,sourceId,quiz,img)
        })
    });

    function getStyle(){
        var oWidth=document.body.clientWidth ;
        var oHeight=document.body.clientHeight ;
        var oTextwidth=parseInt((oWidth-105-30))+'px';
        var TextCon1width=parseInt((oWidth-105-30))+'px';
        // console.log(oWidth);
        $(".DivImg").css({
            "width":parseInt((oWidth-40)/3),
            "height":parseInt($(".DivImg").width()*0.672),
        })
        $(".DivImg").css({
            "height":parseInt($(".DivImg").width()*0.672),
        })
        $(".oText").css({
            "width":oTextwidth,
        })
        $(".TextCon1").css({
            "width":TextCon1width,
        })
        $(".TextListImg:last").css({
            border:"none"
        })
        // console.log($(".DivImg").width());
    }
</script>
</body>
</html>

